let chatContainer=document.querySelector(".chat__message-container"),chatDateTemplate=document.querySelector("#chat-date"),chatUserTemplate=document.querySelector("#chat-user-message"),chatAdminTemplate=document.querySelector("#chat-admin-message"),chatWindow=document.querySelector(".chat__window"),chatButton=document.querySelector(".chat__message-form-button"),chatText=document.querySelector(".chat__message-form-textarea"),chatForm=document.querySelector(".chat__message-form"),adminMessageText="Lörem ipsum suparad pepött då satsig och soskap metrosocial. Sapongar trenåvis i hypol innan visiskap, heterovybelt. Besav ditugen stenosade om exopagt. ",presenceOfMessages=!1,presenceOfDate=!1,now=new Date;const sendMessage=e=>()=>{fetch("https://example.com/api/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}).then((e=>{if(!e.ok)throw new Error("Ошибка при отправке сообщения");return e.json()})).then((e=>{console.log("Ответ сервера:",e)})).catch((e=>{console.error("Ошибка:",e)}))};let getDate=()=>{if(!presenceOfDate){let e=chatDateTemplate.content.cloneNode(!0),t=e.querySelector(".chat__message-date"),a=String(now.getHours()),n=String(now.getMinutes()),s=(a<10?"0":"")+a+":"+(n<10?"0":"")+n;t.textContent="Сегодня, "+s,chatContainer.appendChild(e),presenceOfDate=!0}},addedAnswerMessage=()=>{let e=chatAdminTemplate.content.cloneNode(!0),t=e.querySelector(".chat__message-text"),a=e.querySelector("time"),n=String(now.getHours()),s=String(now.getMinutes()),o=(n<10?"0":"")+n+":"+(s<10?"0":"")+s;a.setAttribute("datetime",o),a.textContent=o,t.textContent=adminMessageText,chatContainer.appendChild(e),chatContainer.scrollTop=chatContainer.scrollHeight},addedMessage=()=>{if(""!==chatText.value){chatWindow.classList.remove("chat__window--empty");let e=chatUserTemplate.content.cloneNode(!0),t=chatText.value,a=e.querySelector(".chat__message-text"),n=e.querySelector("time"),s=String(now.getHours()),o=String(now.getMinutes()),c=(s<10?"0":"")+s+":"+(o<10?"0":"")+o;n.setAttribute("datetime",c),n.textContent=c,a.textContent=t,chatText.value="",chatContainer.appendChild(e),chatContainer.scrollTop=chatContainer.scrollHeight,presenceOfMessages||(setTimeout((()=>{addedAnswerMessage()}),2e3),presenceOfMessages=!0)}};chatButton.addEventListener("click",(function(e){e.preventDefault(),getDate(),addedMessage(),sendMessage(chatText.value)})),chatText.addEventListener("keydown",(function(e){"Enter"===e.code&&(e.preventDefault(),getDate(),addedMessage(),sendMessage(chatText.value))})),chatText.addEventListener("keydown",(function(e){"NumpadEnter"===e.code&&(e.preventDefault(),getDate(),addedMessage(),sendMessage(chatText.value))}));